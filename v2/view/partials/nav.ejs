<nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
    <div class="container">
        <a class="navbar-brand" href="/"><i class="bi bi-file-earmark-pdf me-2"></i>Conecta x Morrinhos</a>
        
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item">
                    <a class="nav-link <%= (typeof currentPage !== 'undefined' && (currentPage === 'disparo' || currentPage === 'index')) ? 'active' : '' %>" href="/">
                        <i class="bi bi-send me-1"></i>Home
                    </a>
                </li>
                <!-- <li class="nav-item">
                    <a class="nav-link <%= (typeof currentPage !== 'undefined' && currentPage === 'upload') ? 'active' : '' %>" href="/upload">
                        <i class="bi bi-cloud-upload me-1"></i>Upload
                    </a>
                </li> -->
                <li class="nav-item">
                    <a class="nav-link <%= (typeof currentPage !== 'undefined' && currentPage === 'upload_csv') ? 'active' : '' %>" href="/upload-csv">
                        <i class="bi bi-file-earmark-spreadsheet me-1"></i>Upload CSV
                    </a>
                </li>                
                <li class="nav-item">
                    <a class="nav-link <%= (typeof currentPage !== 'undefined' && currentPage === 'disparos') ? 'active' : '' %>" href="/disparos">
                        <i class="bi bi-list-check me-1"></i>Disparos
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link <%= (typeof currentPage !== 'undefined' && currentPage === 'relatorios') ? 'active' : '' %>" href="/relatorios">
                        <i class="bi bi-graph-up me-1"></i>Relatórios
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link <%= (typeof currentPage !== 'undefined' && currentPage === 'configuracoes') ? 'active' : '' %>" href="/configuracoes">
                        <i class="bi bi-gear me-1"></i>Configurações
                    </a>
                </li>
                <% if (typeof user !== 'undefined' && user && user.role === 'admin') { %>
                <li class="nav-item">
                    <a class="nav-link <%= (typeof currentPage !== 'undefined' && currentPage === 'usuarios') ? 'active' : '' %>" href="/usuarios">
                        <i class="bi bi-people me-1"></i>Usuários
                    </a>
                </li>
                <% } %>
                <% if (typeof user !== 'undefined' && user) { %>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person-circle me-1"></i><%= user.name %>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                        <li><h6 class="dropdown-header">Usuário: <%= user.username %></h6></li>
                        <li><span class="dropdown-item-text small text-muted">Papel: <%= user.role === 'admin' ? 'Administrador' : 'Usuário' %></span></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="/logout"><i class="bi bi-box-arrow-right me-2"></i>Sair</a></li>
                    </ul>
                </li>
                <% } %>
            </ul>
        </div>
    </div>
</nav>
